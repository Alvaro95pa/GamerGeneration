{"version":3,"file":"informacion-prod.component.js","sourceRoot":"","sources":["informacion-prod.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,OnInit} from 'angular2/core';\nimport { Router } from 'angular2/router';\nimport { RouteParams } from 'angular2/router';\nimport {Usuario} from './usuario.model';\nimport {Prod,infodetalle,infotecnica,requisitosinfor,comentario} from './clases';\nimport {Sesion} from './sesion.model';\nimport {comentarioscomponent} from './comentarios.component';\nimport {clasesservice} from './clases.service';\nimport {SesionService} from './sesion.service';\nimport {UsuarioService} from './usuario.service';\n\n\n@Component({\n  selector:'prod-detalle',\n  template: `\n    <div class=\"panel-group\">\n      <div class=\"panel panel-danger\">\n        <div class=\"panel-heading\">Datos Básicos</div>\n        <div class=\"panel-body\">\n          <div  class=\"datos col-md-9 col-xs-7\">\n            <h4>Información técnica</h4>\n            <dl  *ngIf=\"aux_tipoprod!=1 && visible\">\n              <dt>Fecha de lanzamiento: </dt>\n              <dd>{{produc.fecha}}</dd>\n              <dt>Género: </dt>\n              <dd><span class=\"label label-default\">{{produc.genero}}</span></dd>\n              <dt>Director:</dt>\n              <dd>{{produc.desarrollador}}</dd>\n              <dt>Patrocinador:</dt>\n              <dd>{{produc.editor}}</dd>\n            </dl>\n            <dl  *ngIf=\"aux_tipoprod==1 && visible\">\n              <dt>Fecha de lanzamiento: </dt>\n              <dd>{{produc.fecha}}</dd>\n              <dt>Género: </dt>\n              <dd><span class=\"label label-default\">{{produc.genero}}</span></dd>\n              <dt>Desarrollador:</dt>\n              <dd>{{produc.desarrollador}}</dd>\n              <dt>Editor:</dt>\n              <dd>{{produc.editor}}</dd>\n              <dt>Plataformas:</dt>\n              <dd><span class=\"label label-default\">{{produc.plataforma}}</span></dd>\n            </dl>\n            <div *ngIf=\"aux_tipoprod==1 && visible\">\n              <h4>Requisitos del sistema</h4>\n              <dl>\n                <dt>Procesador:</dt>\n                <dd>{{produc.procesador}}</dd>\n                <dt>Memoria:</dt>\n                <dd>{{produc.memoria}}</dd>\n                <dt>Gráficos:</dt>\n                <dd>{{produc.grafica}}</dd>\n                <dt>Almacenamiento:</dt>\n                <dd>{{produc.almacenamiento}}</dd>\n              </dl>\n            </div>\n          </div>\n\n          <div class=\"portada col-md-3 col-xs-5\">\n            <img *ngIf=\"visible\" src={{produc.img.url}}>\n            <div *ngIf=\"loged\"  (click)=\"AddSeguir(produc)\" [class.checkfavorito]=\"seguir\" class=\"favorito col-md-12 col-xs-12\">\n              <div><span class=\"glyphicon glyphicon-plus\"></span>Seguir</div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <div *ngIf=\"visible\" class=\"panel panel-danger sinopsis\">\n        <div class=\"panel-heading\">Sinopsis</div>\n        <div class=\"panel-body\">\n          <p>{{produc.sinopsis}}</p>\n        </div>\n      </div>\n\n      <div *ngIf=\"visible\" class=\"panel panel-danger trailer\">\n        <div class=\"panel-heading\">Trailer</div>\n        <div class=\"panel-body \">\n           <div class=\"embed-responsive embed-responsive-16by9\">\n              <iframe class=\"embed-responsive-item\" src={{produc.trailer}}></iframe>\n           </div>\n        </div>\n      </div>\n\n      <div *ngIf=\"visible\" class=\"panel panel-danger comentarios\">\n        <div class=\"panel-heading\">Comentarios</div>\n        <div class=\"panel-body\">\n          <div *ngFor=\"#coment of produc.comentarios\">\n            <comentarios [comentario]=\"coment\"></comentarios>\n          </div>\n        </div>\n       </div>\n\n       <div *ngIf=\"loged && visible_usuario\" class=\"panel panel-danger comentarios respuesta\">\n        <div class=\"panel-heading\">\n          <button type=\"button\" class=\"btn btn-primary btn_respuesta\" onclick=\"document.getElementById('oculto').style.display = 'block';\"><span class=\"glyphicon glyphicon-plus\"></span> Responder</button></div>\n        <div class=\"panel-body\" id=\"oculto\" style='display:none;'>\n          <div class=\"col-md-12 col-xs-12 respuesta\">\n            <header class=\"col-md-2 col-xs-2\">\n              <dl>\n                <dd><img *ngIf=\"visible_usuario\" src={{usuario.imagen.url}}></dd>\n                <dd><a>{{usuario.usuario}}</a></dd>\n              </dl>\n            </header>\n            <div class=\"col-sm-10 col-xs-10\">\n              <div class=\"text col-sm-12 col-xs-12\">\n                <div class=\"col-sm-10\">\n                  <p>Mensaje:</p>\n                  <textarea class=\"mens\"   [(ngModel)]=\"respuesta\">Escribe</textarea>\n                </div>\n                <div class=\"col-sm-2 col-xs-4 nota\">\n                  <p>Puntuación:</p>\n                  <input class=\"col-sm-9 col-xs4\"   [(ngModel)]=\"nota\">\n                </div>\n              </div>\n              <button (click)=\"enviarcomentario()\" id=\"btn_enviar\" class=\"col-sm-2 col-xs-12\">Enviar</button>\n              <div *ngIf=\"error\" class=\"msg_error\"><p >Debe introducir una puntuación entre 1 y 10</p></div>\n            </div>\n          </div>\n        </div>\n        </div>\n\n    </div>\n  `,\n  directives: [comentarioscomponent]\n})\n//<!--*ngIf=\"sesion.loged\"-->\nexport class informacionprod implements OnInit{\n  produc: Prod;\n  aux_tipoprod: number;\n  aux_id:number;\n  comentarios:comentario[];\n  visible: boolean =  false;\n  respuesta:string;\n  nota:number;\n  resp_comentario:comentario;\n  error:boolean =false;\n\n  seguir:boolean =false;\n  favorito:boolean =false;\n  logeado:boolean = true;\n  id_user=1;\n\n  loged:boolean;\n  visible_usuario:boolean=false\n  usuario: Usuario;\n  aux_prod:Prod;\n\n\n  constructor (private router: Router,private UsuarioService: UsuarioService,private SesionService: SesionService,private clasesservice: clasesservice,private _routeParams: RouteParams){}\n  AddSeguir(info:Prod){\n    /*\n    this.seguir=!this.seguir;\n    if(this.seguir){\n      this.UsuarioService.addContenido(this.aux_prod,this.sesion.id);\n    } else {\n      this.UsuarioService.removeContenido(this.aux_prod,this.sesion.id);\n    }\n    console.log(info.id);\n    */\n  }\n\n  getsesion(){\n    this.loged = this.SesionService.getLogged();\n    if (this.loged){\n      this.SesionService.getSesion().then(\n        actual =>{ this.usuario = actual,\n        this.visible_usuario=true;\n      });\n\n      console.log(this.loged);\n\n\n    } else {\n      this.usuario = {\n        id:-1,\n        roles:null,\n        nombre:\"invitado\",\n        apellidos:\"invitado\",\n        nacionalidad:null,\n        cumpleanos:null,\n        usuario:\"invitado\",\n        contrasena:null,\n        correo:null,\n        imagen:null,\n        nAmigos:null,\n        nPelis:null,\n        nSeries:null,\n        nJuegos:null,\n        ultima:null,\n        tUsuario:null,\n        fPeli:null,\n        fSerie:null,\n        fJuego:null,\n        pPerfilTodos:null,\n        cPerfilTodos:null,\n        aPerfilTodos:null,\n        contenido:null,\n        amigos:null\n      }}\n  }\n  \n  getProducto(){\n    let id = +this._routeParams.get('idprod');\n    let tipoprod = +this._routeParams.get('tipoprod');\n    this.clasesservice.getProd(id).subscribe(prod =>{\n      this.produc = prod\n      console.log(this.usuario.usuario + id + \" \"+ prod.name + \" \"+ this.produc.name + \" \"+ this.produc.grafica);\n      this.visible=true;\n    } );\n    this.aux_tipoprod=tipoprod;\n    this.aux_id=id;\n  }\n  getcomentarios(){\n    let id = +this._routeParams.get('idprod');\n    this.comentarios = this.produc[0].comentarios;\n  }\n  ngOnInit() {\n    this.getProducto();\n    //this.getcomentarios();\n    //this.getsesion();\n    this.clasesservice.getProd(this.aux_id).subscribe(prod => this.aux_prod=prod[0]);\n    this.getsesion();\n    console.log(this.loged);\n  }\n  enviarcomentario(){\n    if(this.nota>10 || this.nota<0){\n      this.error=true;\n    } else {\n      this.resp_comentario = {\n        idjuego:this.produc.id,\n        idcontenido:0,\n        user:this.usuario.usuario,\n        user_img:this.usuario.imagen.url,\n        fecha:\"Hoy\",\n        puntuacion:this.nota,\n        mensaje:this.respuesta\n      };\n      this.produc.comentarios.push(this.resp_comentario);\n\n      this.clasesservice.actualizarProducto(this.produc).subscribe(prod =>{\n        console.log(prod);\n        console.log(this.produc.comentarios);\n      });\n    }\n  }\n}\n"]}