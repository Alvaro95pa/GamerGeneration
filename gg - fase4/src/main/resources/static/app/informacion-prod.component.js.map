{"version":3,"file":"informacion-prod.component.js","sourceRoot":"","sources":["informacion-prod.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YA8HA;gBAoBE,yBAAqB,MAAc,EAAS,cAA8B,EAAS,aAA4B,EAAS,aAA4B,EAAS,YAAyB;oBAAjK,WAAM,GAAN,MAAM,CAAQ;oBAAS,mBAAc,GAAd,cAAc,CAAgB;oBAAS,kBAAa,GAAb,aAAa,CAAe;oBAAS,kBAAa,GAAb,aAAa,CAAe;oBAAS,iBAAY,GAAZ,YAAY,CAAa;oBAftL,YAAO,GAAa,KAAK,CAAC;oBAI1B,UAAK,GAAU,KAAK,CAAC;oBAErB,WAAM,GAAU,KAAK,CAAC;oBACtB,aAAQ,GAAU,KAAK,CAAC;oBACxB,YAAO,GAAW,IAAI,CAAC;oBACvB,YAAO,GAAC,CAAC,CAAC;gBAM8K,CAAC;gBACzL,mCAAS,GAAT,UAAU,IAAgB;oBACxB,IAAI,CAAC,MAAM,GAAC,CAAC,IAAI,CAAC,MAAM,CAAC;oBACzB,EAAE,CAAA,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA,CAAC;wBACd,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;oBACjE,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;oBACpE,CAAC;oBACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACvB,CAAC;gBAED,mCAAS,GAAT;oBAAA,iBAKC;oBAJC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,UAAA,KAAK;wBACvC,KAAI,CAAC,MAAM,GAAC,KAAK,CAAC;wBAClB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBACnC,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,qCAAW,GAAX;oBAAA,iBAOC;oBANC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAC1C,IAAI,QAAQ,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBAClD,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;wBACtC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;oBAAA,CAAC,CAAE,CAAC;oBAC1B,IAAI,CAAC,YAAY,GAAC,QAAQ,CAAC;oBAC3B,IAAI,CAAC,MAAM,GAAC,EAAE,CAAC;gBACjB,CAAC;gBACD,wCAAc,GAAd;oBAAA,iBAGC;oBAFC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAC1C,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,IAAI,CAAE,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,WAAW,GAAG,IAAI,EAAvB,CAAuB,CAAC,CAAC;gBAC/E,CAAC;gBACD,kCAAQ,GAAR;oBAAA,iBAOC;oBANC,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,CAAC,CAAC,EAArB,CAAqB,CAAC,CAAC;oBAE5E,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC;gBACpB,CAAC;gBACD,0CAAgB,GAAhB;oBACE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBACjC,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,GAAC,EAAE,IAAI,IAAI,CAAC,IAAI,GAAC,CAAC,CAAC,CAAA,CAAC;wBAC9B,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC;oBAClB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,IAAI,CAAC,eAAe,GAAG;4BACrB,YAAY,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;4BAC3B,OAAO,EAAC,IAAI,CAAC,MAAM;4BACnB,WAAW,EAAC,CAAC;4BACb,IAAI,EAAC,IAAI,CAAC,MAAM,CAAC,OAAO;4BACxB,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,MAAM;4BAC3B,KAAK,EAAC,KAAK;4BACX,UAAU,EAAC,IAAI,CAAC,IAAI;4BACpB,OAAO,EAAC,IAAI,CAAC,SAAS;yBACvB,CAAC;wBACF,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;wBACvD,IAAI,CAAC,cAAc,EAAE,CAAC;wBACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;oBAC/C,CAAC;gBACH,CAAC;gBA9LH;oBAAC,gBAAS,CAAC;wBACT,QAAQ,EAAC,cAAc;wBACvB,QAAQ,EAAE,4xJA4GT;wBACD,UAAU,EAAE,CAAC,4CAAoB,CAAC;qBACnC,CAAC;;mCAAA;gBA+EF,sBAAC;YAAD,CAAC,AA7ED,IA6EC;YA7ED,6CA6EC,CAAA","sourcesContent":["import {Component,OnInit} from 'angular2/core';\nimport { Router } from 'angular2/router';\nimport { RouteParams } from 'angular2/router';\n\nimport {Prod,infodetalle,infotecnica,requisitosinfor,comentario} from './clases';\nimport {Sesion} from './sesion.model';\nimport {comentarioscomponent} from './comentarios.component';\nimport {clasesservice} from './clases.service';\nimport {SesionService} from './sesion.service';\nimport {UsuarioService} from './usuario.service';\n\n\n@Component({\n  selector:'prod-detalle',\n  template: `\n    <div class=\"panel-group\" *ngFor=\"#produc of producto\">\n      <div class=\"panel panel-danger\">\n        <div class=\"panel-heading\">Datos Básicos</div>\n        <div class=\"panel-body\">\n          <div  class=\"datos col-md-9 col-xs-7\">\n            <h4>Información técnica</h4>\n            <dl  *ngIf=\"aux_tipoprod!=1 && visible\">\n              <dt>Fecha de lanzamiento: </dt>\n              <dd>{{produc.infotecnic.fecha}}</dd>\n              <dt>Género: </dt>\n              <dd><span class=\"label label-default\">{{produc.infotecnic.genero}}</span></dd>\n              <dt>Director:</dt>\n              <dd>{{produc.infotecnic.desarrollador}}</dd>\n              <dt>Patrocinador:</dt>\n              <dd>{{produc.infotecnic.editor}}</dd>\n            </dl>\n            <dl  *ngIf=\"aux_tipoprod==1 && visible\">\n              <dt>Fecha de lanzamiento: </dt>\n              <dd>{{produc.infotecnic.fecha}}</dd>\n              <dt>Género: </dt>\n              <dd><span class=\"label label-default\">{{produc.infotecnic.genero}}</span></dd>\n              <dt>Desarrollador:</dt>\n              <dd>{{produc.infotecnic.desarrollador}}</dd>\n              <dt>Editor:</dt>\n              <dd>{{produc.infotecnic.editor}}</dd>\n              <dt>Plataformas:</dt>\n              <dd><span class=\"label label-default\">{{produc.infotecnic.plataforma}}</span></dd>\n            </dl>\n            <div *ngIf=\"aux_tipoprod==1 && visible\">\n              <h4>Requisitos del sistema</h4>\n              <dl>\n                <dt>Procesador:</dt>\n                <dd>{{produc.inforequisitos.procesador}}</dd>\n                <dt>Memoria:</dt>\n                <dd>{{produc.inforequisitos.memoria}}</dd>\n                <dt>Gráficos:</dt>\n                <dd>{{produc.inforequisitos.graficos}}</dd>\n                <dt>Almacenamiento:</dt>\n                <dd>{{produc.inforequisitos.almacenamiento}}</dd>\n              </dl>\n            </div>\n          </div>\n\n          <div class=\"portada col-md-3 col-xs-5\">\n            <img src={{produc.img}}>\n            <div *ngIf=\"sesion.loged\" (click)=\"AddSeguir(produc)\" [class.checkfavorito]=\"seguir\" class=\"favorito col-md-12 col-xs-12\">\n              <div><span class=\"glyphicon glyphicon-plus\"></span>Seguir</div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <div *ngIf=\"produc.sinopsis\" class=\"panel panel-danger sinopsis\">\n        <div class=\"panel-heading\">Sinopsis</div>\n        <div class=\"panel-body\">\n          <p>{{produc.sinopsis}}</p>\n        </div>\n      </div>\n\n      <div *ngIf=\"produc.trailer\" class=\"panel panel-danger trailer\">\n        <div class=\"panel-heading\">Trailer</div>\n        <div class=\"panel-body \">\n           <div class=\"embed-responsive embed-responsive-16by9\">\n              <iframe class=\"embed-responsive-item\" src={{produc.trailer}}></iframe>\n           </div>\n        </div>\n      </div>\n\n      <div *ngIf=\"comentarios\" class=\"panel panel-danger comentarios\">\n        <div class=\"panel-heading\">Comentarios</div>\n        <div class=\"panel-body\">\n          <div *ngFor=\"#coment of comentarios\">\n            <comentarios [comentario]=\"coment\"></comentarios>\n          </div>\n        </div>\n       </div>\n\n       <div *ngIf=\"sesion.loged\" class=\"panel panel-danger comentarios respuesta\">\n        <div class=\"panel-heading\">\n          <button type=\"button\" class=\"btn btn-primary btn_respuesta\" onclick=\"document.getElementById('oculto').style.display = 'block';\"><span class=\"glyphicon glyphicon-plus\"></span> Responder</button></div>\n        <div class=\"panel-body\" id=\"oculto\" style='display:none;'>\n          <div class=\"col-md-12 col-xs-12 respuesta\">\n            <header class=\"col-md-2 col-xs-2\">\n              <dl>\n                <dd><img src={{sesion.imagen}}></dd>\n                <dd><a>{{sesion.usuario}}</a></dd>\n              </dl>\n            </header>\n            <div class=\"col-sm-10 col-xs-10\">\n              <div class=\"text col-sm-12 col-xs-12\">\n                <div class=\"col-sm-10\">\n                  <p>Mensaje:</p>\n                  <textarea class=\"mens\"   [(ngModel)]=\"respuesta\">Escribe</textarea>\n                </div>\n                <div class=\"col-sm-2 col-xs-4 nota\">\n                  <p>Puntuación:</p>\n                  <input class=\"col-sm-9 col-xs4\"   [(ngModel)]=\"nota\">\n                </div>\n              </div>\n              <button (click)=\"enviarcomentario()\" id=\"btn_enviar\" class=\"col-sm-2 col-xs-12\">Enviar</button>\n              <div *ngIf=\"error\" class=\"msg_error\"><p >Debe introducir una puntuación entre 1 y 10</p></div>\n            </div>\n          </div>\n        </div>\n        </div>\n\n    </div>\n  `,\n  directives: [comentarioscomponent]\n})\n\nexport class informacionprod implements OnInit{\n  producto: infodetalle[];\n  aux_tipoprod: number;\n  aux_id:number;\n  comentarios:comentario[];\n  visible: boolean =  false;\n  respuesta:string;\n  nota:number;\n  resp_comentario:comentario;\n  error:boolean =false;\n\n  seguir:boolean =false;\n  favorito:boolean =false;\n  logeado:boolean = true;\n  id_user=1;\n\n  sesion:Sesion;\n  aux_prod:Prod;\n\n\n  constructor (private router: Router,private UsuarioService: UsuarioService,private SesionService: SesionService,private clasesservice: clasesservice,private _routeParams: RouteParams){}\n  AddSeguir(info:infodetalle){\n    this.seguir=!this.seguir;\n    if(this.seguir){\n      this.UsuarioService.addContenido(this.aux_prod,this.sesion.id);\n    } else {\n      this.UsuarioService.removeContenido(this.aux_prod,this.sesion.id);\n    }\n    console.log(info.id);\n  }\n\n  getsesion(){\n    this.SesionService.getSesion().then(login => {\n      this.sesion=login;\n      console.log(this.sesion.usuario);\n    });\n  }\n  getProducto(){\n    let id = +this._routeParams.get('idprod');\n    let tipoprod = +this._routeParams.get('tipoprod');\n    this.clasesservice.getinfo(id).then(prod =>{\n      this.producto = prod} );\n    this.aux_tipoprod=tipoprod;\n    this.aux_id=id;\n  }\n  getcomentarios(){\n    let id = +this._routeParams.get('idprod');\n    this.clasesservice.getcomentarios(id).then( list => this.comentarios = list);\n  }\n  ngOnInit() {\n    this.getProducto();\n    this.getcomentarios();\n    this.getsesion();\n    this.clasesservice.getProd(this.aux_id).then(prod => this.aux_prod=prod[0]);\n\n    this.visible=true;\n  }\n  enviarcomentario(){\n    console.log(this.sesion.usuario);\n    if(this.nota>10 || this.nota<0){\n      this.error=true;\n    } else {\n      this.resp_comentario = {\n        idcomentario:this.sesion.id,\n        idjuego:this.aux_id,\n        idcontenido:0,\n        user:this.sesion.usuario,\n        user_img:this.sesion.imagen,\n        fecha:\"Hoy\",\n        puntuacion:this.nota,\n        mensaje:this.respuesta\n      };\n      this.clasesservice.pushRespuesta(this.resp_comentario);\n      this.getcomentarios();\n      console.log(this.resp_comentario.puntuacion);\n    }\n  }\n}\n"]}