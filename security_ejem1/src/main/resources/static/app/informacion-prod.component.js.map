{"version":3,"file":"informacion-prod.component.js","sourceRoot":"","sources":["informacion-prod.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YA6HA;gBAqBE,yBAAqB,MAAc,EAAS,cAA8B,EAAS,aAA4B,EAAS,aAA4B,EAAS,YAAyB;oBAAjK,WAAM,GAAN,MAAM,CAAQ;oBAAS,mBAAc,GAAd,cAAc,CAAgB;oBAAS,kBAAa,GAAb,aAAa,CAAe;oBAAS,kBAAa,GAAb,aAAa,CAAe;oBAAS,iBAAY,GAAZ,YAAY,CAAa;oBAhBtL,YAAO,GAAa,KAAK,CAAC;oBAI1B,UAAK,GAAU,KAAK,CAAC;oBAErB,WAAM,GAAU,KAAK,CAAC;oBACtB,aAAQ,GAAU,KAAK,CAAC;oBACxB,YAAO,GAAW,IAAI,CAAC;oBACvB,YAAO,GAAC,CAAC,CAAC;gBAO8K,CAAC;gBACzL,mCAAS,GAAT,UAAU,IAAgB;oBACxB;;;;;;;;sBAQE;gBACJ,CAAC;gBAED,mCAAS,GAAT;oBACE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;oBAC5C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;gBAC5C,CAAC;gBAED,qCAAW,GAAX;oBAAA,iBAOC;oBANC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAC1C,IAAI,QAAQ,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBAClD,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;wBACtC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;oBAAA,CAAC,CAAE,CAAC;oBAC1B,IAAI,CAAC,YAAY,GAAC,QAAQ,CAAC;oBAC3B,IAAI,CAAC,MAAM,GAAC,EAAE,CAAC;gBACjB,CAAC;gBAED,wCAAc,GAAd;oBAAA,iBAGC;oBAFC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAC1C,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,IAAI,CAAE,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,WAAW,GAAG,IAAI,EAAvB,CAAuB,CAAC,CAAC;gBAC/E,CAAC;gBACD,kCAAQ,GAAR;oBAAA,iBAOC;oBANC,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,CAAC,CAAC,EAArB,CAAqB,CAAC,CAAC;oBAE5E,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC;gBACpB,CAAC;gBACD,0CAAgB,GAAhB;oBACE;;;;;;;;;;;;;;;;;;;uBAmBG;gBACL,CAAC;gBAnMH;oBAAC,gBAAS,CAAC;wBACT,QAAQ,EAAC,cAAc;wBACvB,QAAQ,EAAE,4xJA4GT;wBACD,UAAU,EAAE,CAAC,4CAAoB,CAAC;qBACnC,CAAC;;mCAAA;gBAoFF,sBAAC;YAAD,CAAC,AAlFD,IAkFC;YAlFD,6CAkFC,CAAA","sourcesContent":["import {Component,OnInit} from 'angular2/core';\r\nimport { Router } from 'angular2/router';\r\nimport { RouteParams } from 'angular2/router';\r\nimport {Usuario} from './usuario.model';\r\nimport {Prod,infodetalle,infotecnica,requisitosinfor,comentario} from './clases';\r\nimport {comentarioscomponent} from './comentarios.component';\r\nimport {clasesservice} from './clases.service';\r\nimport {SesionService} from './sesion.service';\r\nimport {UsuarioService} from './usuario.service';\r\n\r\n\r\n@Component({\r\n  selector:'prod-detalle',\r\n  template: `\r\n    <div class=\"panel-group\" *ngFor=\"#produc of producto\">\r\n      <div class=\"panel panel-danger\">\r\n        <div class=\"panel-heading\">Datos Básicos</div>\r\n        <div class=\"panel-body\">\r\n          <div  class=\"datos col-md-9 col-xs-7\">\r\n            <h4>Información técnica</h4>\r\n            <dl  *ngIf=\"aux_tipoprod!=1 && visible\">\r\n              <dt>Fecha de lanzamiento: </dt>\r\n              <dd>{{produc.infotecnic.fecha}}</dd>\r\n              <dt>Género: </dt>\r\n              <dd><span class=\"label label-default\">{{produc.infotecnic.genero}}</span></dd>\r\n              <dt>Director:</dt>\r\n              <dd>{{produc.infotecnic.desarrollador}}</dd>\r\n              <dt>Patrocinador:</dt>\r\n              <dd>{{produc.infotecnic.editor}}</dd>\r\n            </dl>\r\n            <dl  *ngIf=\"aux_tipoprod==1 && visible\">\r\n              <dt>Fecha de lanzamiento: </dt>\r\n              <dd>{{produc.infotecnic.fecha}}</dd>\r\n              <dt>Género: </dt>\r\n              <dd><span class=\"label label-default\">{{produc.infotecnic.genero}}</span></dd>\r\n              <dt>Desarrollador:</dt>\r\n              <dd>{{produc.infotecnic.desarrollador}}</dd>\r\n              <dt>Editor:</dt>\r\n              <dd>{{produc.infotecnic.editor}}</dd>\r\n              <dt>Plataformas:</dt>\r\n              <dd><span class=\"label label-default\">{{produc.infotecnic.plataforma}}</span></dd>\r\n            </dl>\r\n            <div *ngIf=\"aux_tipoprod==1 && visible\">\r\n              <h4>Requisitos del sistema</h4>\r\n              <dl>\r\n                <dt>Procesador:</dt>\r\n                <dd>{{produc.inforequisitos.procesador}}</dd>\r\n                <dt>Memoria:</dt>\r\n                <dd>{{produc.inforequisitos.memoria}}</dd>\r\n                <dt>Gráficos:</dt>\r\n                <dd>{{produc.inforequisitos.graficos}}</dd>\r\n                <dt>Almacenamiento:</dt>\r\n                <dd>{{produc.inforequisitos.almacenamiento}}</dd>\r\n              </dl>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"portada col-md-3 col-xs-5\">\r\n            <img src={{produc.img}}>\r\n            <div *ngIf=\"sesion.loged\" (click)=\"AddSeguir(produc)\" [class.checkfavorito]=\"seguir\" class=\"favorito col-md-12 col-xs-12\">\r\n              <div><span class=\"glyphicon glyphicon-plus\"></span>Seguir</div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"produc.sinopsis\" class=\"panel panel-danger sinopsis\">\r\n        <div class=\"panel-heading\">Sinopsis</div>\r\n        <div class=\"panel-body\">\r\n          <p>{{produc.sinopsis}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div *ngIf=\"produc.trailer\" class=\"panel panel-danger trailer\">\r\n        <div class=\"panel-heading\">Trailer</div>\r\n        <div class=\"panel-body \">\r\n           <div class=\"embed-responsive embed-responsive-16by9\">\r\n              <iframe class=\"embed-responsive-item\" src={{produc.trailer}}></iframe>\r\n           </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div *ngIf=\"comentarios\" class=\"panel panel-danger comentarios\">\r\n        <div class=\"panel-heading\">Comentarios</div>\r\n        <div class=\"panel-body\">\r\n          <div *ngFor=\"#coment of comentarios\">\r\n            <comentarios [comentario]=\"coment\"></comentarios>\r\n          </div>\r\n        </div>\r\n       </div>\r\n\r\n       <div *ngIf=\"sesion.loged\" class=\"panel panel-danger comentarios respuesta\">\r\n        <div class=\"panel-heading\">\r\n          <button type=\"button\" class=\"btn btn-primary btn_respuesta\" onclick=\"document.getElementById('oculto').style.display = 'block';\"><span class=\"glyphicon glyphicon-plus\"></span> Responder</button></div>\r\n        <div class=\"panel-body\" id=\"oculto\" style='display:none;'>\r\n          <div class=\"col-md-12 col-xs-12 respuesta\">\r\n            <header class=\"col-md-2 col-xs-2\">\r\n              <dl>\r\n                <dd><img src={{sesion.imagen}}></dd>\r\n                <dd><a>{{sesion.usuario}}</a></dd>\r\n              </dl>\r\n            </header>\r\n            <div class=\"col-sm-10 col-xs-10\">\r\n              <div class=\"text col-sm-12 col-xs-12\">\r\n                <div class=\"col-sm-10\">\r\n                  <p>Mensaje:</p>\r\n                  <textarea class=\"mens\"   [(ngModel)]=\"respuesta\">Escribe</textarea>\r\n                </div>\r\n                <div class=\"col-sm-2 col-xs-4 nota\">\r\n                  <p>Puntuación:</p>\r\n                  <input class=\"col-sm-9 col-xs4\"   [(ngModel)]=\"nota\">\r\n                </div>\r\n              </div>\r\n              <button (click)=\"enviarcomentario()\" id=\"btn_enviar\" class=\"col-sm-2 col-xs-12\">Enviar</button>\r\n              <div *ngIf=\"error\" class=\"msg_error\"><p >Debe introducir una puntuación entre 1 y 10</p></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n\r\n    </div>\r\n  `,\r\n  directives: [comentarioscomponent]\r\n})\r\n\r\nexport class informacionprod implements OnInit{\r\n  producto: infodetalle[];\r\n  aux_tipoprod: number;\r\n  aux_id:number;\r\n  comentarios:comentario[];\r\n  visible: boolean =  false;\r\n  respuesta:string;\r\n  nota:number;\r\n  resp_comentario:comentario;\r\n  error:boolean =false;\r\n\r\n  seguir:boolean =false;\r\n  favorito:boolean =false;\r\n  logeado:boolean = true;\r\n  id_user=1;\r\n\r\n  loged:boolean;\r\n  usr: Usuario;\r\n  aux_prod:Prod;\r\n\r\n\r\n  constructor (private router: Router,private UsuarioService: UsuarioService,private SesionService: SesionService,private clasesservice: clasesservice,private _routeParams: RouteParams){}\r\n  AddSeguir(info:infodetalle){\r\n    /*\r\n    this.seguir=!this.seguir;\r\n    if(this.seguir){\r\n      this.UsuarioService.addContenido(this.aux_prod,this.sesion.id);\r\n    } else {\r\n      this.UsuarioService.removeContenido(this.aux_prod,this.sesion.id);\r\n    }\r\n    console.log(info.id);\r\n    */\r\n  }\r\n\r\n  getsesion(){\r\n    this.loged = this.SesionService.getLogged();\r\n    this.usr = this.SesionService.getSesion();\r\n  }\r\n\r\n  getProducto(){\r\n    let id = +this._routeParams.get('idprod');\r\n    let tipoprod = +this._routeParams.get('tipoprod');\r\n    this.clasesservice.getinfo(id).then(prod =>{\r\n      this.producto = prod} );\r\n    this.aux_tipoprod=tipoprod;\r\n    this.aux_id=id;\r\n  }\r\n\r\n  getcomentarios(){\r\n    let id = +this._routeParams.get('idprod');\r\n    this.clasesservice.getcomentarios(id).then( list => this.comentarios = list);\r\n  }\r\n  ngOnInit() {\r\n    this.getProducto();\r\n    this.getcomentarios();\r\n    this.getsesion();\r\n    this.clasesservice.getProd(this.aux_id).then(prod => this.aux_prod=prod[0]);\r\n\r\n    this.visible=true;\r\n  }\r\n  enviarcomentario(){\r\n    /*\r\n    console.log(this.usr.usuario);\r\n    if(this.nota>10 || this.nota<0){\r\n      this.error=true;\r\n    } else {\r\n      this.resp_comentario = {\r\n        idcomentario:this.usr.id,\r\n        idjuego:this.aux_id,\r\n        idcontenido:0,\r\n        user:this.usr.usuario,\r\n        user_img:this.usr.imagen,\r\n        fecha:\"Hoy\",\r\n        puntuacion:this.nota,\r\n        mensaje:this.respuesta\r\n      };\r\n      this.clasesservice.pushRespuesta(this.resp_comentario);\r\n      this.getcomentarios();\r\n      console.log(this.resp_comentario.puntuacion);\r\n\r\n    }*/\r\n  }\r\n}\r\n"]}