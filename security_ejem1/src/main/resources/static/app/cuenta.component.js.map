{"version":3,"file":"cuenta.component.js","sourceRoot":"","sources":["cuenta.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input } from 'angular2/core';\r\nimport { MenuComponent } from './menu.component';\r\nimport { RouteParams } from 'angular2/router';\r\nimport { UsuarioService } from './usuario.service';\r\nimport { OnInit } from 'angular2/core';\r\nimport { Usuario } from './usuario.model'\r\nimport { Prod } from './clases';\r\nimport { SesionService } from './sesion.service';\r\n\r\n@Component({\r\n  selector: 'cuenta-component',\r\n  templateUrl: 'app/cuenta.component.html',\r\n  directives: [MenuComponent],\r\n  providers: [UsuarioService, SesionService]\r\n})\r\n\r\nexport class CuentaComponent implements OnInit {\r\n  //Variables\r\n  usuario: Usuario;\r\n  usuario_actual: Usuario;\r\n  actual: string;\r\n  id_actual: number;\r\n  visible: boolean = false;\r\n  amigo: boolean = false;\r\n  //Metodos\r\n  constructor(private _usuarioService: UsuarioService, private _routeParams: RouteParams, private _sesionService: SesionService) {}\r\n  ngOnInit() {\r\n    this.actual = this._sesionService.getSesion().usuario;\r\n    this.id_actual = this._sesionService.getSesion().id;\r\n    let id = +this._routeParams.get('id');\r\n    this._usuarioService.getUsuario(id).subscribe(usuario =>{\r\n      this.usuario = usuario;\r\n      if(id != this.id_actual){\r\n        this._usuarioService.getUsuario(this.id_actual).subscribe(usuario =>{\r\n          this.usuario_actual = usuario;\r\n          this.esAmigo()\r\n        })\r\n      };\r\n      this.visible = true\r\n    })\r\n  };\r\n  addAmigo(){\r\n    this.usuario.amigos.push(this.usuario_actual);\r\n    this.usuario.nAmigos = this.usuario.nAmigos + 1;\r\n    this.usuario_actual.amigos.push(this.usuario);\r\n    this.usuario_actual.nAmigos = this.usuario_actual.nAmigos + 1;\r\n    this._usuarioService.addAmigo(this.usuario);\r\n    this._usuarioService.addAmigo(this.usuario_actual);\r\n    this.esAmigo();\r\n  }\r\n  removeAmigo(){\r\n    let posicion1 = this.usuario.amigos.indexOf(this.usuario_actual);\r\n    this.usuario.amigos.splice(posicion1, 1);\r\n    let posicion2 = this.usuario_actual.amigos.indexOf(this.usuario);\r\n    this.usuario_actual.amigos.splice(posicion2, 1);\r\n    this.usuario.nAmigos = this.usuario.nAmigos - 1;\r\n    this.usuario_actual.nAmigos = this.usuario_actual.nAmigos - 1;\r\n    this._usuarioService.remAmigo(this.usuario);\r\n    this._usuarioService.remAmigo(this.usuario_actual);\r\n    this.amigo = false;\r\n  }\r\n  esAmigo(){\r\n      for(let amigo of this.usuario_actual.amigos){\r\n        if(amigo.id == this.usuario.id){\r\n          this.amigo = true;\r\n        }\r\n      }\r\n  }\r\n}\r\n"]}