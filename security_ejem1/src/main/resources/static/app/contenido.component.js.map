{"version":3,"file":"contenido.component.js","sourceRoot":"","sources":["contenido.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component } from 'angular2/core';\r\nimport { MenuComponent } from './menu.component';\r\nimport { UsuarioService } from './usuario.service';\r\nimport { OnInit } from 'angular2/core';\r\nimport { Usuario } from './usuario.model'\r\nimport { RouteParams } from 'angular2/router';\r\nimport { Prod } from './clases';\r\nimport { SesionService } from './sesion.service';\r\nimport { Router } from 'angular2/router';\r\n\r\n@Component({\r\n  selector: 'contenido-component',\r\n  templateUrl: 'app/contenido.component.html',\r\n  directives: [MenuComponent],\r\n  providers: [UsuarioService, SesionService]\r\n})\r\n\r\nexport class ContenidoComponent{\r\n  //Variables\r\n  usuario: Usuario;\r\n  actual: string;\r\n  visible: boolean = false;\r\n  //Metodos\r\n  constructor(private _router: Router, private _usuarioService: UsuarioService, private _routeParams: RouteParams, private _sesionService: SesionService) {}\r\n  ngOnInit() {\r\n    let id= +this._routeParams.get('id');\r\n    this._usuarioService.getUsuario(id).subscribe(usuario =>{\r\n      this.usuario = usuario;\r\n      this._sesionService.getSesion().then(actual =>{\r\n        this.actual = actual.usuario;\r\n        this.visible = true\r\n      });\r\n    });\r\n  };\r\n  cambiarFavorito(fav: Prod){\r\n    if(fav.tipoprod == 3){\r\n      this.usuario.fPeli = fav;\r\n    }\r\n    if(fav.tipoprod == 2){\r\n      this.usuario.fSerie = fav;\r\n    }\r\n    if(fav.tipoprod == 1){\r\n      this.usuario.fJuego = fav;\r\n    }\r\n      this._usuarioService.setFavorito(this.usuario).subscribe();\r\n  }\r\n  removeContenido(cont: Prod){\r\n    if(cont.tipoprod == 3){\r\n      if(this.usuario.fPeli != null){\r\n        if(cont.name == this.usuario.fPeli.name){\r\n          this.usuario.fPeli = null;\r\n          this._usuarioService.removeFav(this.usuario).subscribe();\r\n        }\r\n      }\r\n      this.usuario.nPelis = this.usuario.nPelis - 1;\r\n    }\r\n    if(cont.tipoprod == 2){\r\n      if(this.usuario.fSerie!= null){\r\n        if(cont.name == this.usuario.fSerie.name){\r\n          this.usuario.fSerie = null;\r\n          this._usuarioService.removeFav(this.usuario).subscribe();\r\n        }\r\n      }\r\n      this.usuario.nSeries = this.usuario.nSeries - 1;\r\n    }\r\n    if(cont.tipoprod == 1){\r\n      if(this.usuario.fJuego != null){\r\n        if(cont.name == this.usuario.fJuego.name){\r\n          this.usuario.fJuego = null;\r\n          this._usuarioService.removeFav(this.usuario).subscribe();\r\n        }\r\n      }\r\n      this.usuario.nJuegos = this.usuario.nJuegos - 1;\r\n    }\r\n    let posicion = this.usuario.coleccion.indexOf(cont);\r\n    this.usuario.coleccion.splice(posicion,1);\r\n    this._usuarioService.removeContenido(this.usuario).subscribe();\r\n  }\r\n  comprobarJuegoFav(nombre: string){\r\n    if(this.usuario.fJuego != null){\r\n      return this.usuario.fJuego.name == nombre;\r\n    }\r\n    else{\r\n      return false;\r\n    }\r\n  }\r\n  comprobarSerieFav(nombre: string){\r\n    if(this.usuario.fSerie != null){\r\n      return this.usuario.fSerie.name == nombre;\r\n    }\r\n    else{\r\n      return false;\r\n    }\r\n  }\r\n  comprobarPeliculaFav(nombre: string){\r\n    if(this.usuario.fPeli != null){\r\n      return this.usuario.fPeli.name == nombre;\r\n    }\r\n    else{\r\n      return false;\r\n    }\r\n  }\r\n  irA(producto: Prod){\r\n    this._router.navigate(['Detalleprod', {tipoProd: producto.tipoprod, idProd: producto.id}]);\r\n  }\r\n}\r\n"]}