{"version":3,"file":"anadirproducto.component.js","sourceRoot":"","sources":["anadirproducto.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,Input,OnInit} from 'angular2/core';\nimport {infotecnica,requisitosinfor,Prod,comentario} from './clases';\nimport {Contenido} from './contenido.model';\nimport {Image} from './image.model';\nimport {clasesservice} from './clases.service'\nimport {modoadminservice} from './modoadmin.service';\nimport { Router } from 'angular2/router';\nimport { RouteParams } from 'angular2/router';\n\nimport {MultipartItem} from \"./multipart-item\";\nimport {MultipartUploader} from \"./multipart-uploader\";\nimport {HTTP_PROVIDERS, Http} from 'angular2/http';\n\n@Component({\n  selector:'anadirproducto',\n  template: `\n  <div class=\"row admin\">\n    <div class=\"col-sm-3 aux\">\n      <ul class=\"nav nav-pills nav-stacked col-sm-12 contorno\">\n        <li  [class.selected]=\"tipoopcion==1\" (click)=\"gotoadmin_users('Users')\"><a >Usuarios</a></li>\n        <li  [class.selected]=\"tipoopcion==2\" (click)=\"gotoadmin_contenido('Noticia')\"><a >Noticias</a></li>\n        <li  [class.selected]=\"tipoopcion==3\" (click)=\"gotoadmin_contenido('Análisis')\"><a >Analisis</a></li>\n        <li  [class.selected]=\"tipoopcion==4\" (click)=\"gotoadmin_productos()\"><a >Productos</a></li>\n        <li  (click)=\"gotoadmin_salir()\"><a >Salir</a></li>\n      </ul>\n    </div>\n\n    <div class=\"col-sm-9\" >\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Nombre:</span>\n        <input [(ngModel)]=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Inserte un nombre\" aria-describedby=\"basic-addon1\">\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Categoría:</span>\n        <ul class=\"col-xs-12 anadircategoria nav nav-pills nav-stacked col-sm-12 contorno\">\n          <li [class.selecteccheck]=\"tipoprod==1\" (click)=\"tipoprod = 1\"><a >Videojuego</a></li>\n          <li [class.selecteccheck]=\"tipoprod==2\" (click)=\"tipoprod = 2\"><a >Serie</a></li>\n          <li [class.selecteccheck]=\"tipoprod==3\" (click)=\"tipoprod = 3\"><a >Película</a></li>\n        </ul>\n      </div>\n      <div *ngIf=\"tipoprod==2 || tipoprod==3\">\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Fecha:</span>\n        <input [(ngModel)]=\"fecha\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una fecha\" aria-describedby=\"basic-addon1\">\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Director:</span>\n        <input [(ngModel)]=\"desarrollador\" type=\"text\" class=\"form-control\" placeholder=\"Inserte un el nombre de un director\" aria-describedby=\"basic-addon1\">\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Patrocinador:</span>\n        <input [(ngModel)]=\"editor\" type=\"text\" class=\"form-control\" placeholder=\"Inserte un el nombre de un editor\" aria-describedby=\"basic-addon1\">\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Genero:</span>\n        <input [(ngModel)]=\"genero\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una genero\" aria-describedby=\"basic-addon1\">\n      </div>\n      </div>\n      <div *ngIf=\"tipoprod==1\" class=\"datos col-sm-6 infotecn\">\n          <h4>Información técnica</h4>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Fecha:</span>\n            <input [(ngModel)]=\"fecha\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una fecha\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Genero:</span>\n            <input [(ngModel)]=\"genero\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una genero\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Plataformas:</span>\n            <input [(ngModel)]=\"plataforma\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una plataforma\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Desarrollador:</span>\n            <input [(ngModel)]=\"desarrollador\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una desarrolladora\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Editor:</span>\n            <input [(ngModel)]=\"editor\" type=\"text\" class=\"form-control\" placeholder=\"Inserte un editor\" aria-describedby=\"basic-addon1\">\n          </div>\n      </div>\n      <div *ngIf=\"tipoprod==1\" class=\"datos col-sm-6 inforeq\">\n          <h4>Requisitos del sistema</h4>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Procesador:</span>\n            <input [(ngModel)]=\"procesador\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una procesador\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Memoria:</span>\n            <input [(ngModel)]=\"memoria\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una cantidad de memoria\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Graficos:</span>\n            <input [(ngModel)]=\"grafica\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una tarjeta grafica\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Almacenamiento:</span>\n            <input [(ngModel)]=\"almacenamiento\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una cantidad en GBs\" aria-describedby=\"basic-addon1\">\n          </div>\n\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Trailer:</span>\n        <input [(ngModel)]=\"trailer\" type=\"text\" class=\"form-control\" placeholder=\"Inserte una URL de un video\" aria-describedby=\"basic-addon1\">\n      </div>\n      <div class=\"input-group nuevocontenido\">\n        <span class=\"input-group-addon\" id=\"basic-addon1\">Sinopsis:</span>\n        <textarea class=\"mens col-sm-12 col-xs-12\" [(ngModel)]=\"sinopsis\"></textarea>\n      </div>\n      <div class=\"datos col-sm-12 inforeq\">\n          <h4>Opciones de Portada</h4>\n          <div class=\"input-group nuevocontenido\">\n            <span class=\"input-group-addon\" id=\"basic-addon1\">Descripción de la Img:</span>\n            <input [(ngModel)]=\"desc_portada\" type=\"text\" class=\"form-control\" placeholder=\"Descripción\" aria-describedby=\"basic-addon1\">\n          </div>\n          <div class=\"formulario\">\n            <form>\n          \t\t<label for=\"exampleInputFile\">Buscador de ficheros</label><input type=\"file\" (change)=\"selectFile($event)\">\n          \t\t<button type=\"submit\" class=\"btn btn-danger\" (click)=\"upload()\">Subir imagen</button>\n            </form>\n          </div>\n      </div>\n    <button (click)=\"anadirElemProd()\" class=\"btnanadir btn btn-danger col-sm-3 col-xs-12\"  >Añadir Contenido</button>\n\n  </div>\n  `\n})\n\nexport class anadirproducto implements OnInit{\n  desc_portada:string;\n  portada:File;\n  auximgP:string;\n\n  tipoopcion:number = 1;\n  new_prod:Prod;\n  tipoprod:number;\r\n  auxid: number;\r\n  name:string;\n  img:string;\n  trailer:string;\n  fecha:string;\n  genero:string;\n  plataforma:string;\n  desarrollador:string;\n  editor:string;\n  procesador:string;\n  memoria:string;\n  grafica:string;\n  almacenamiento:string;\n  infotecnic: infotecnica;\n  inforequisitos: requisitosinfor;\n  sinopsis:string;\n  new_comentarios: comentario[];\n  newimg:Image;\n\n  constructor (private http: Http, private router: Router,private adminservice: modoadminservice,private clasesservice: clasesservice,private _routeParams: RouteParams){}\n  //METODOS PARA IMAGENES\n  loadImages(){\n\t\treturn this.http.get(\"/images\").map(\n\t\t\tresponse => response.json()\n    )\n\t}\n  buscarImage(id:number){\n    return this.http.get(\"/image/\"+id).map(\n\t\t\tresponse => response.json()\n    )\n  }\n  selectFile($event) {\n      this.portada = $event.target.files[0];\n  \t\tconsole.debug(\"Selected file: \" + this.portada.name + \" type:\" + this.portada.size + \" size:\" + this.portada.size);\n\t}\n  upload() {\n\t\tconsole.debug(\"Uploading file...\");\n\n\t\tif (this.portada == null || this.desc_portada == null){\n\t\t\tconsole.error(\"You have to select a file and set a description.\");\n\t\t\treturn;\n\t\t}\n\n\t\tlet formData = new FormData();\n\n\t\tformData.append(\"description\", this.desc_portada);\n\t\tformData.append(\"file\",  this.portada);\n\n\t\tlet multipartItem = new MultipartItem(new MultipartUploader({url: '/image/upload'}));\n\n\t\tmultipartItem.formData = formData;\n\n\t\tmultipartItem.callback = (data, status, headers) => {\n\n\t\t\tif (status == 200){\n\t\t\t\tconsole.debug(\"File has been uploaded\");\n\t\t\t\tthis.loadImages();\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Error uploading file\");\n\t\t\t}\n\t\t};\n\n\t\tmultipartItem.upload();\n\r\n    this.loadImages().subscribe(id =>{\r\n      this.auxid=id;\r\n      console.log(this.auxid);\r\n    })\r\n\r\n }\r\n\r\n  anadirElemProd(){\r\n    this.buscarImage(this.auxid).subscribe(image => {\r\n      this.newimg=image\r\n      console.log(this.newimg)\r\n\r\n      this.new_prod = {\r\n        tipoprod:this.tipoprod,\r\n        name:this.name,\r\n        img:this.newimg,\r\n        fecha: this.fecha,\r\n        genero:this.genero,\r\n        plataforma:this.plataforma,\r\n        desarrollador:this.desarrollador,\r\n        editor:this.editor,\r\n        procesador:this.procesador,\r\n        memoria:this.memoria,\r\n        grafica:this.grafica,\r\n        almacenamiento:this.almacenamiento,\r\n        trailer:this.trailer,\r\n        sinopsis:this.sinopsis,\r\n        comentarios: this.new_comentarios\r\n      }\r\n\r\n        this.adminservice.pushProd(this.new_prod).subscribe(prod =>{\r\n          console.log(prod);\r\n          this.gotoadmin_productos();\r\n        });\r\n    })\r\n  }\r\n\n\r\n  getopcion(){\n    this.tipoopcion=4;\n  }\n\n  ngOnInit(){\n    this.getopcion();\n  }\n  gotoadmin_users(){\n    let link = ['AdminUsers'];\n    this.router.navigate(link);\n  }\n  gotoadmin_contenido(opc:string){\n    let link = ['AdminContenido',{tipo:opc}];\n    this.router.navigate(link);\n  }\n  gotoadmin_productos(){\n    let link = ['AdminProductos'];\n    this.router.navigate(link);\n  }\n  gotoadmin_salir(){\n    let link = ['Princ_Catalogo'];\n    this.router.navigate(link);\n  }\n}\n/*\n\n*/\n"]}