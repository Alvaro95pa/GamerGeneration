{"version":3,"file":"analisis-details.js","sourceRoot":"","sources":["analisis-details.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit} from 'angular2/core';\r\nimport {Contenido} from './contenido.model';\r\nimport {ContenidoService} from './contenido.service';\r\nimport {clasesservice} from './clases.service';\r\nimport {SesionService} from './sesion.service';\r\nimport { RouteParams } from 'angular2/router';\r\nimport {Prod,comentario} from './clases';\r\nimport {Usuario} from './usuario.model';\r\nimport {Image} from './image.model';\r\nimport {comentarioscomponent} from './comentarios.component';\r\n\r\n@Component({\r\n  selector: 'analisis-detalles',\r\n  templateUrl: 'app/analisis-details.html',\r\n  providers: [ContenidoService, clasesservice],\r\n  directives: [comentarioscomponent]\r\n})\r\n\r\nexport class AnalisisDetails implements OnInit{\r\n  contenido: Contenido;\r\n  visible: boolean = false;\r\n  visible_usuario: boolean = false;\r\n  error:boolean =false;\r\n  producto: Prod;\r\n  comentarios:comentario[];\r\n  resp_comentario:comentario;\r\n  loged:boolean;\r\n  usuario: Usuario;\r\n  aux_id:number;\r\n  respuesta:string;\r\n\r\n  constructor(private _sesionService: SesionService,private _contentService: ContenidoService, private _clasesService: clasesservice,\r\n    private _routeParams: RouteParams) {}\r\n\r\n  ngOnInit() {\r\n    let id = +this._routeParams.get('id');\r\n    this._contentService.getContenidoId(id).subscribe(contenido =>{\r\n      this.contenido = contenido;\r\n      this.visible = true;\r\n      if(contenido.nProducto != null){\r\n        this.getProducto(contenido.nProducto);\r\n      }\r\n    });\r\n    this.getComentarios();\r\n    this.getsesion();\r\n  }\r\n\r\n  private getProducto(nombre: string){\r\n    this._clasesService.getProdNombre(nombre).subscribe(producto =>{\r\n      this.producto = producto;\r\n    })\r\n  }\r\n\r\n  getComentarios(){\r\n    let id = +this._routeParams.get('id');\r\n    this.aux_id=id;\r\n    this._clasesService.getcomentariosContenido(id).subscribe( list => this.comentarios = list);\r\n  }\r\n\r\n  getsesion(){\r\n    this.loged = this._sesionService.getLogged();\r\n    this._sesionService.getSesion().then(\r\n      actual => {\r\n        this.usuario = actual,\r\n        this.visible_usuario = true;\r\n    });\r\n  }\r\n\r\n  enviarcomentario(){\r\n      this.resp_comentario = {\r\n        idjuego:0,\r\n        idcontenido:this.contenido.id,\r\n        user:this.usuario.usuario,\r\n        user_img:this.usuario.imagen.url,\r\n        fecha:\"Hoy\",\r\n        puntuacion:0,\r\n        mensaje:this.respuesta\r\n      };\r\n      this.contenido.comentarios.push(this.resp_comentario);\r\n      console.log(this.contenido.comentarios);\r\n\r\n      this._contentService.actualizarContenido(this.contenido).subscribe(cont =>{\r\n        console.log(\"Hecho\");\r\n      });\r\n  }\r\n}\r\n"]}